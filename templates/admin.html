{% extends "base.html" %}

{% block title %}Admin{% endblock %}

{% block main %}
<h1>Admin Page</h1>
        <div id="project-wrapper">
            <h2>Projects Overview</h2>
            {% for project in projects %}
            <div class="project">
                <h2>{{ project.name }}</h2>
                <p>Number of Likes: {{ project.likes }}</p>
                <h3>Comments</h3>
                <div class="comments-container">
                  {% for comment in comments.get(project.id, []) %}
                      <div class="comment">
                          <h4>{{ comment.name }}</h4>
                          <p>{{ comment.message }}</p>
                      </div>
                      <form action="{{ url_for('routes.delete_comment_route') }}" method="post">
                        <input type="hidden" name="project_id" value="{{ project.id|string }}">
                        <input type="hidden" name="index" value="{{ loop.index0 }}">
                        <button type="submit" class="btn custom-btn">Delete</button>
                      </form>
                  {% endfor %}
                </div>
              </div>
              {% endfor %}
        </div>
        <div id="contact-wrapper">
          <h2>Contact submissions</h2>
            {% for message in messages %}
            <div class="message">
              <p>{{ message.name }}</p>
              <p>{{ message.email }}</p>
              <p>{{ message.subject }}</p>
              <p>{{ message.message }}</p>
            </div>
            {% endfor %}
        </div>
{% endblock %}